---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "oxide_vpc_firewall_rules Resource - terraform-provider-oxide"
subcategory: ""
description: |-
  This resource manages VPC firewall rules.
  !> Firewall rules defined by this resource are considered exhaustive and will
  overwrite any other firewall rules for the VPC once applied.
  !> Setting the rules attribute to [] will delete all firewall rules for the
  VPC which may cause undesired network traffic. Please double check the firewall
  rules when updating this resource.
---

# oxide_vpc_firewall_rules (Resource)

This resource manages VPC firewall rules.

!> Firewall rules defined by this resource are considered exhaustive and will
overwrite any other firewall rules for the VPC once applied.

!> Setting the `rules` attribute to `[]` will delete all firewall rules for the
VPC which may cause undesired network traffic. Please double check the firewall
rules when updating this resource.

## Example Usage

```terraform
# Basic Example
resource "oxide_vpc_firewall_rules" "example" {
  vpc_id = "6556fc6a-63c0-420b-bb23-c3205410f5cc"
  rules = [
    {
      action      = "allow"
      description = "Allow HTTPS."
      name        = "allow-https"
      direction   = "inbound"
      priority    = 50
      status      = "enabled"
      filters = {
        hosts = [
          {
            type  = "vpc"
            value = "default"
          }
        ]
        ports     = ["443"]
        protocols = [{ type = "tcp" }]
      },
      targets = [
        {
          type  = "subnet"
          value = "default"
        }
      ]
    }
  ]
}

# ICMP Example
resource "oxide_vpc_firewall_rules" "example" {
  vpc_id = "6556fc6a-63c0-420b-bb23-c3205410f5cc"
  rules = [
    {
      action      = "allow"
      description = "Allow ICMP"
      name        = "allow-icmp"
      direction   = "inbound"
      priority    = 50
      status      = "enabled"
      filters = {
        protocols = [
          # All ICMP.
          {
            type = "icmp",
          },
          # Echo Reply types.
          {
            type      = "icmp",
            icmp_type = 0
          },
          # Echo Reply types with codes 1-3.
          {
            type      = "icmp",
            icmp_type = 0
            icmp_code = "1-3"
          },
        ]
      },
      targets = [
        {
          type  = "subnet"
          value = "default"
        }
      ]
    }
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `rules` (Attributes Set) Associated firewall rules. (see [below for nested schema](#nestedatt--rules))
- `vpc_id` (String) ID of the VPC that will have the firewall rules applied to.

### Optional

- `timeouts` (Attributes) (see [below for nested schema](#nestedatt--timeouts))

### Read-Only

- `id` (String) Unique, immutable, system-controlled identifier of the firewall rules. Specific only to Terraform.
- `time_created` (String) Timestamp of when the VPC firewall rules were last created.
- `time_modified` (String) Timestamp of when the VPC firewall rules were last modified.

<a id="nestedatt--rules"></a>
### Nested Schema for `rules`

Required:

- `action` (String) Whether traffic matching the rule should be allowed or dropped. Possible values are: `allow` or `deny`.
- `description` (String) Description for the VPC firewall rule.
- `direction` (String) Whether this rule is for incoming or outgoing traffic. Possible values are: `inbound` or `outbound`.
- `filters` (Attributes) Reductions on the scope of the rule. (see [below for nested schema](#nestedatt--rules--filters))
- `name` (String) Name of the VPC firewall rule.
- `priority` (Number) The relative priority of this rule.
- `status` (String) Whether this rule is in effect. Possible values are: `enabled` or `disabled`.
- `targets` (Attributes Set) Sets of instances that the rule applies to. (see [below for nested schema](#nestedatt--rules--targets))

<a id="nestedatt--rules--filters"></a>
### Nested Schema for `rules.filters`

Optional:

- `hosts` (Attributes Set) If present, the sources (if incoming) or destinations (if outgoing) this rule applies to. (see [below for nested schema](#nestedatt--rules--filters--hosts))
- `ports` (Set of String) If present, the destination ports this rule applies to.
- `protocols` (Attributes Set) The protocols in a firewall rule's filter. (see [below for nested schema](#nestedatt--rules--filters--protocols))

<a id="nestedatt--rules--filters--hosts"></a>
### Nested Schema for `rules.filters.hosts`

Required:

- `type` (String) The rule applies to a single or all instances of this type, or specific IPs. Possible values: `vpc`, `subnet`, `instance`, `ip`, `ip_net`.
- `value` (String) Depending on the type, it will be one of the following:
  - `vpc`: Name of the VPC.
  - `subnet`: Name of the VPC subnet.
  - `instance`: Name of the instance.
  - `ip`: IP address.
  - `ip_net`: IPv4 or IPv6 subnet.


<a id="nestedatt--rules--filters--protocols"></a>
### Nested Schema for `rules.filters.protocols`

Required:

- `type` (String) The protocol type. Must be one of `tcp`, `udp`, or `icmp`.

Optional:

- `icmp_code` (String) ICMP code (e.g., 0) or range (e.g., 1-3). Omit to filter all traffic of the specified `icmp_type`. Only valid when type is `icmp` and `icmp_type` is provided.
- `icmp_type` (Number) ICMP type. Only valid when type is `icmp`.



<a id="nestedatt--rules--targets"></a>
### Nested Schema for `rules.targets`

Required:

- `type` (String) The rule applies to a single or all instances of this type, or specific IPs. Possible values: `vpc`, `subnet`, `instance`, `ip`, `ip_net`.
- `value` (String) Depending on the type, it will be one of the following:
  - `vpc`: Name of the VPC.
  - `subnet`: Name of the VPC subnet.
  - `instance`: Name of the instance.
  - `ip`: IP address.
  - `ip_net`: IPv4 or IPv6 subnet.



<a id="nestedatt--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `delete` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.
- `read` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Read operations occur during any refresh or planning operation when refresh is enabled.
- `update` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
