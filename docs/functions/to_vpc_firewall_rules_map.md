---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "to_vpc_firewall_rules_map function - terraform-provider-oxide"
subcategory: ""
description: |-
  Converts a VPC firewall rule set to the updated map schema.
---

# function: to_vpc_firewall_rules_map

The `provider::oxide::to_vpc_firewall_rules_map` function converts the
`rules` attribute of an
[`oxide_vpc_firewall_rules`](https://registry.terraform.io/providers/oxidecomputer/oxide/latest/docs/resources/oxide_vpc_firewall_rules)
resource from the old set schema to the new map value.

It is intended to help reduce the amount of configuration changes required when
updating the provider to a new version, but it should not be used long term.

This function will be removed in a future release. Migrate to the new map
`rules` schema as soon as possible.

## Example Usage

```terraform
resource "oxide_vpc_firewall_rules" "example" {
  vpc_id = oxide_vpc.example.id

  rules = provider::oxide::to_vpc_firewall_rules_map(jsonencode([
    {
      name        = "allow-https"
      description = "Allow HTTPS."
      action      = "allow"
      direction   = "inbound"
      priority    = 50
      status      = "enabled"
      filters = {
        hosts = [
          {
            type  = "vpc"
            value = oxide_vpc.example.name
          }
        ]
        ports = [443]
        protocols = [
          { type = "tcp" },
          { type = "udp" },
        ]
      },
      targets = [
        {
          type  = "subnet"
          value = "default"
        }
      ]
    },
  ]))

  # Converted rules map:
  #   rules = {
  #     allow-https = {
  #       description = "Allow HTTPS."
  #       action      = "allow"
  #       direction   = "inbound"
  #       priority    = 50
  #       status      = "enabled"
  #       filters = {
  #         hosts = [
  #           {
  #             type  = "vpc"
  #             value = oxide_vpc.example.name
  #           }
  #         ]
  #         ports = [443]
  #         protocols = [
  #           { type = "tcp" },
  #           { type = "udp" },
  #         ]
  #       },
  #       targets = [
  #         {
  #           type  = "subnet"
  #           value = "default"
  #         }
  #       ]
  #     },
  #   }
}
```

## Signature

<!-- signature generated by tfplugindocs -->
```text
to_vpc_firewall_rules_map(rules_json string) map of object
```

## Arguments

<!-- arguments generated by tfplugindocs -->
1. `rules_json` (String) JSON encoded string of the `rules` set. Use the
[`jsonencode`](https://developer.hashicorp.com/terraform/language/functions/jsonencode)
function to convert the existing `rules` set to a JSON string.
